# PG Nullable Column Handling Prompt Result

Here's the updated analysis table with information about nullable columns in WHERE clauses:

## Analysis Summary for test_dict Table

| **Query Name/Location**                                                                                                                                                                          | **Type**        | **Nullable Columns in WHERE** | **Refactor** | **Remarks**                                                                                                                                            |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------- | ----------------------------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [TestDict.findAll](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                                        | Named Query     | N/A                           | N            | Selects all records, no WHERE clause                                                                                                                   |
| [TestDict.findTestCkeyByAlphaCodeAndLabno](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                | Named Query     | No                            | N            | Uses `test_alpha_code` (NOT NULL) and `test_labno` (NOT NULL) - both non-nullable columns                                                              |
| [TestDict.findDependent](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                                  | Named Query     | No                            | N            | Uses `test_ckey` (NOT NULL) in WHERE clause - non-nullable primary key                                                                                 |
| [TestDict.findSignoutCode](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                                | Named Query     | No                            | N            | Uses `test_ckey` (NOT NULL) in WHERE clause - non-nullable primary key                                                                                 |
| [TestDict.findTestCkeyBySpecimen](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                         | Named Query     | **Yes** (`test_specimen`)     | N            | Uses `test_specimen` (nullable) but method accepts primitive `int` which cannot be null                                                                |
| [TestDict.findResultTypeFlagByKey](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                        | Named Query     | No                            | N            | Uses `test_ckey` (NOT NULL) in WHERE clause - non-nullable primary key                                                                                 |
| [TestDict.selectUserTests](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                                | Named Query     | No                            | N            | WHERE clause joins on `test_ckey` (NOT NULL); no nullable columns with parameters                                                                      |
| [TestDict.findTestNameByAlphaCodeAndLabno](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                | Named Query     | No                            | N            | Uses `test_labno` (NOT NULL) and joins on non-nullable columns only                                                                                    |
| [TestDict.findByLabno](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html)                                    | Named Query     | No                            | N            | Uses `test_labno` (NOT NULL) - non-nullable column                                                                                                     |
| [selectTest(List)](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 143-161                         | Inline JPQL     | No                            | N            | Uses `test_ckey` (NOT NULL) and `test_labno` (NOT NULL) - both non-nullable columns                                                                    |
| [selectTest(int, List)](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 178-197                    | Inline JPQL     | No                            | N            | Uses `test_labno` (NOT NULL) and `test_alpha_code` (NOT NULL) - both non-nullable columns                                                              |
| [selectTest(List, Integer[])](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 234-265              | Inline JPQL     | **Yes** (`test_dependent`)    | N            | Uses `test_ckey` (NOT NULL) in primary WHERE; `test_dependent` (nullable) used in IN clause but values embedded directly, not parameterized comparison |
| [selectTestDicts()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 321-329                        | Inline SQL      | No                            | N            | Native query with no nullable column parameters; joins on `test_ckey` (NOT NULL) only                                                                  |
| [selectTestDict(Integer, String)](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 409-415          | Inline JPQL     | No                            | N            | Uses `test_labno` (NOT NULL) and `test_alpha_code` (NOT NULL) - both non-nullable columns                                                              |
| [selectRegistrableTests()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 467-508                 | Inline SQL      | No                            | N            | Native query with complex joins; only non-nullable test_dict columns in WHERE                                                                          |
| [selectRegistrableTests(Integer)](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 527-553          | Inline SQL      | No                            | N            | Uses `test_labno` (NOT NULL) - non-nullable column; joins on primary keys                                                                              |
| [selectRegistrableTests(Integer, Integer)](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 569-583 | Inline JPQL     | No                            | N            | Uses `test_ckey` (NOT NULL) and `test_labno` (NOT NULL) - both non-nullable columns                                                                    |
| [selectTestAlphaCodeForQcReport()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 607-614         | Inline JPQL     | No                            | N            | Uses `test_labno` (NOT NULL) - non-nullable column                                                                                                     |
| [selectQcRangeTest()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 630-651                      | Inline JPQL     | No                            | N            | Uses `test_labno` (NOT NULL) - non-nullable column                                                                                                     |
| [selectApsRegistrableGroups()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 663-680             | Inline JPQL     | No                            | N            | Uses non-nullable columns only in WHERE clause                                                                                                         |
| [selectGcrSendoutListTestName()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 696-720           | Inline JPQL/SQL | No                            | N            | Uses named query internally; non-nullable columns only                                                                                                 |
| [selectPrelimHeaderByRequestNo()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 729-753          | Inline SQL      | No                            | N            | Native query; test_dict joined but no nullable columns used with parameters                                                                            |
| [selectTisHlaTestCkeys()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 766-774                  | Inline JPQL     | No                            | N            | Uses non-nullable columns in WHERE clause                                                                                                              |
| [selectTisNonHlaTestCkeys()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 787-796               | Inline JPQL     | No                            | N            | Uses non-nullable columns in WHERE clause                                                                                                              |
| [selectTestDictsWithRegisterableHeader()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 806-810  | Inline JPQL     | No                            | N            | Uses `test_ckey` (NOT NULL) - non-nullable primary key                                                                                                 |
| [selectTestPrintProfileByKey()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 824-830            | Inline JPQL     | No                            | N            | Queries `test_pprofile` (nullable) in SELECT but WHERE uses `test_ckey` (NOT NULL)                                                                     |
| [selectTestDictVos()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 841-855                      | Inline JPQL     | No                            | N            | Uses non-nullable columns only in WHERE clause with parameters                                                                                         |
| [selectAllTestDictVos()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 865-876                   | Inline JPQL     | No                            | N            | Uses non-nullable columns only in WHERE clause with parameters                                                                                         |
| [selectProfileKeysByApsProfileTestCode()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 893-900  | Inline JPQL     | No                            | N            | Uses `test_alpha_code` (NOT NULL) with LIKE - non-nullable column                                                                                      |
| [selectTestDictsByTestCode()](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - Line 913-920              | Inline JPQL     | No                            | N            | Uses `test_alpha_code` (NOT NULL) with LIKE - non-nullable column                                                                                      |

### Summary Statistics

- **Total Queries Analyzed:** 30
- **Named Queries:** 9
- **Inline JPQL/SQL:** 21
- **Queries with Nullable Columns in WHERE:** 2
- **Queries Requiring Refactoring:** 0

### Key Findings

1. **2 queries use nullable columns in WHERE clause:**
    - [TestDict.findTestCkeyBySpecimen](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - uses `test_specimen = :specimen` but parameter is primitive `int` (cannot be null)

[selectTest(List, Integer[])](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) - uses `test_dependent IN (...)` but values are embedded directly in SQL, not passed as nullable parameters

2. **No refactoring required** because:
    - No queries accept nullable wrapper types (Integer, String, etc.) that are compared against nullable columns
    - The nullable column comparisons either use primitives or embed values directly rather than using parameterized queries
3. **Potential future consideration:** If [selectTestCkey(int specimen)](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html) is ever changed to [selectTestCkey(Integer specimen)](vscode-file://vscode-app/c:/Program%20Files/Microsoft%20VS%20Code/resources/app/out/vs/code/electron-browser/workbench/workbench.html), the query would need null-safe refactoring